"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6874],{6874:(F,p,a)=>{a.r(p),a.d(p,{TestPage:()=>C});var g=a(467),d=a(4262),u=a(2200),r=a(3384),t=a(3664),c=a(8728),f=a(7134);const m=(e,s)=>({correct:e,wrong:s});function b(e,s){if(1&e&&(t.j41(0,"div",6)(1,"div",7),t.EFF(2),t.k0s(),t.nrm(3,"ion-progress-bar",8),t.j41(4,"div",9),t.EFF(5),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.SpI("\u23f3 ",n.formatTime(n.timer)),t.R7$(),t.Y8G("value",(n.currentQuestionIndex+1)/n.questions.length),t.R7$(2),t.Lme(" Question ",n.currentQuestionIndex+1," / ",n.questions.length,"\n")}}function x(e,s){if(1&e){const n=t.RV6();t.j41(0,"ion-item",12),t.bIt("click",function(){const i=c.eBV(n).$implicit,_=t.XpG(2);return c.Njj(_.selectOption(i))}),t.j41(1,"ion-label"),t.EFF(2),t.k0s()()}if(2&e){const n=s.$implicit,o=t.XpG(2);t.AVh("selected",n===o.selectedOption),t.R7$(2),t.JRh(n)}}function v(e,s){if(1&e&&(t.j41(0,"div",10)(1,"h2"),t.EFF(2),t.k0s(),t.j41(3,"ion-list"),t.DNE(4,x,3,3,"ion-item",11),t.k0s()()),2&e){const n=t.XpG();t.R7$(2),t.JRh(null==n.questions[n.currentQuestionIndex]?null:n.questions[n.currentQuestionIndex].question),t.R7$(2),t.Y8G("ngForOf",null==n.questions[n.currentQuestionIndex]?null:n.questions[n.currentQuestionIndex].options)}}function P(e,s){if(1&e){const n=t.RV6();t.j41(0,"ion-button",18),t.bIt("click",function(){c.eBV(n);const i=t.XpG(2);return c.Njj(i.nextQuestion())}),t.EFF(1," Next "),t.nrm(2,"ion-icon",19),t.k0s()}if(2&e){const n=t.XpG(2);t.Y8G("disabled",!n.answered)}}function O(e,s){if(1&e){const n=t.RV6();t.j41(0,"ion-button",20),t.bIt("click",function(){c.eBV(n);const i=t.XpG(2);return c.Njj(i.submitQuiz())}),t.EFF(1," Submit "),t.k0s()}if(2&e){const n=t.XpG(2);t.Y8G("disabled",!n.answered)}}function w(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",13)(1,"ion-button",14),t.bIt("click",function(){c.eBV(n);const i=t.XpG();return c.Njj(i.prevQuestion())}),t.nrm(2,"ion-icon",15),t.EFF(3," Previous "),t.k0s(),t.DNE(4,P,3,1,"ion-button",16)(5,O,2,1,"ion-button",17),t.k0s()}if(2&e){const n=t.XpG();t.R7$(),t.Y8G("disabled",0===n.currentQuestionIndex),t.R7$(3),t.Y8G("ngIf",n.currentQuestionIndex<n.questions.length-1),t.R7$(),t.Y8G("ngIf",n.currentQuestionIndex===n.questions.length-1)}}function M(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",21)(1,"div",22)(2,"div",23),t.nrm(3,"ion-icon",24)(4,"ion-icon",25)(5,"ion-icon",26),t.k0s(),t.j41(6,"h2",27),t.EFF(7,"GREAT EFFORT!"),t.k0s(),t.j41(8,"div",28)(9,"div",29)(10,"span"),t.EFF(11,"Quiz Points"),t.k0s(),t.j41(12,"span"),t.EFF(13),t.k0s()(),t.j41(14,"div",29)(15,"span"),t.EFF(16,"Time Bonus"),t.k0s(),t.j41(17,"span"),t.EFF(18),t.k0s()(),t.j41(19,"div",30)(20,"span"),t.EFF(21,"Total Points"),t.k0s(),t.j41(22,"span"),t.EFF(23),t.k0s()()(),t.j41(24,"ion-button",31),t.bIt("click",function(){c.eBV(n);const i=t.XpG();return c.Njj(i.goToReview())}),t.EFF(25," GOT IT "),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(13),t.Lme("",n.correctCount," x 10 = ",10*n.correctCount," pts"),t.R7$(5),t.SpI("",n.timeBonus," pts"),t.R7$(5),t.SpI("",n.totalPoints," pts")}}function T(e,s){if(1&e&&(t.j41(0,"div")(1,"p",37),t.EFF(2),t.k0s()()),2&e){const n=s.$implicit,o=t.XpG().$implicit,i=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.l_i(2,m,n===o.answer,n===i.userAnswers[o.id]&&n!==o.answer)),t.R7$(),t.SpI(" ",n," ")}}function I(e,s){if(1&e&&(t.j41(0,"div",34)(1,"p",35),t.EFF(2),t.k0s(),t.DNE(3,T,3,5,"div",36),t.k0s()),2&e){const n=s.$implicit,o=s.index;t.R7$(2),t.Lme("",o+1,". ",n.question),t.R7$(),t.Y8G("ngForOf",n.options)}}function k(e,s){if(1&e&&(t.j41(0,"div",32)(1,"h2"),t.EFF(2,"Review Answers"),t.k0s(),t.DNE(3,I,4,3,"div",33),t.k0s()),2&e){const n=t.XpG();t.R7$(3),t.Y8G("ngForOf",n.questions)}}let C=(()=>{class e{constructor(n,o,i){this.route=n,this.firestore=o,this.router=i,this.questions=[],this.currentQuestionIndex=0,this.timer=0,this.duration=0,this.answered=!1,this.selectedOption=null,this.correctCount=0,this.showResult=!1,this.reviewMode=!1,this.resultColor="",this.userAnswers={},this.timeBonus=0,this.totalPoints=0}ngOnInit(){var n=this;return(0,g.A)(function*(){const o=Number(n.route.snapshot.queryParamMap.get("questions"))||5;n.duration=Number(n.route.snapshot.queryParamMap.get("time"))||600,n.timer=n.duration,yield n.loadQuestions(o)})()}ngOnDestroy(){this.stopTimer()}ionViewWillEnter(){this.startTimer()}ionViewWillLeave(){this.stopTimer()}startTimer(){this.timerInterval||(this.timerInterval=setInterval(()=>{this.timer>0?this.timer--:this.stopTimer()},1e3))}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}formatTime(n){const i=n%60;return`${Math.floor(n/60)}:${i<10?"0"+i:i}`}loadQuestions(n){var o=this;return(0,g.A)(function*(){const i=(0,d.rJ)(o.firestore,"questions"),_=yield(0,d.GG)(i);let l=[];_.forEach(h=>{l.push({id:h.id,...h.data()})}),l=l.sort(()=>Math.random()-.5),o.questions=l.slice(0,n)})()}selectOption(n){this.answered=!0,this.selectedOption=n,this.userAnswers[this.questions[this.currentQuestionIndex].id]=n}nextQuestion(){this.currentQuestionIndex<this.questions.length-1&&(this.currentQuestionIndex++,this.loadStoredAnswer())}prevQuestion(){this.currentQuestionIndex>0&&(this.currentQuestionIndex--,this.loadStoredAnswer())}loadStoredAnswer(){const n=this.questions[this.currentQuestionIndex].id;this.userAnswers[n]?(this.selectedOption=this.userAnswers[n],this.answered=!0):(this.selectedOption=null,this.answered=!1)}get progress(){return`${this.currentQuestionIndex+1}/${this.questions.length}`}goToReview(){this.showResult=!1,this.reviewMode=!0}submitQuiz(){this.correctCount=0,this.questions.forEach(n=>{this.userAnswers[n.id]===n.answer&&this.correctCount++}),this.timeBonus=Math.floor(this.timer/30),this.totalPoints=10*this.correctCount+this.timeBonus,this.showResult=!0,this.stopTimer()}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(f.nX),t.rXU(d._7),t.rXU(f.Ix))};static#n=this.\u0275cmp=t.VBU({type:e,selectors:[["app-test"]],decls:10,vars:5,consts:[[1,"quiz-header"],["class","top-bar",4,"ngIf"],["class","question-container",4,"ngIf"],["class","button-row",4,"ngIf"],["class","result-popup",4,"ngIf"],["class","review-container",4,"ngIf"],[1,"top-bar"],[1,"timer"],["color","primary",3,"value"],[1,"progress-text"],[1,"question-container"],["button","",3,"selected","click",4,"ngFor","ngForOf"],["button","",3,"click"],[1,"button-row"],[1,"prev-btn","styled-btn",3,"click","disabled"],["slot","start","name","arrow-back-outline"],["class","next-btn styled-btn",3,"disabled","click",4,"ngIf"],["class","submit-btn styled-btn",3,"disabled","click",4,"ngIf"],[1,"next-btn","styled-btn",3,"click","disabled"],["slot","end","name","arrow-forward-outline"],[1,"submit-btn","styled-btn",3,"click","disabled"],[1,"result-popup"],[1,"popup-card","result-card"],[1,"stars"],["name","star",1,"star","red"],["name","star",1,"star","yellow"],["name","star",1,"star","green"],[1,"effort-text"],[1,"score-table"],[1,"row"],[1,"row","total"],["expand","block",1,"got-it-btn",3,"click"],[1,"review-container"],["class","review-question",4,"ngFor","ngForOf"],[1,"review-question"],[1,"question"],[4,"ngFor","ngForOf"],[1,"option",3,"ngClass"]],template:function(o,i){1&o&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Science Test"),t.k0s()()(),t.j41(4,"ion-content"),t.DNE(5,b,6,4,"div",1)(6,v,5,2,"div",2)(7,w,6,3,"div",3)(8,M,26,4,"div",4)(9,k,4,1,"div",5),t.k0s()),2&o&&(t.R7$(5),t.Y8G("ngIf",!i.showResult&&!i.reviewMode),t.R7$(),t.Y8G("ngIf",i.questions.length>0&&!i.showResult&&!i.reviewMode),t.R7$(),t.Y8G("ngIf",i.questions.length>0&&!i.showResult&&!i.reviewMode),t.R7$(),t.Y8G("ngIf",i.showResult),t.R7$(),t.Y8G("ngIf",i.reviewMode))},dependencies:[u.MD,u.YU,u.Sq,u.bT,r.bv,r.Jm,r.W9,r.eU,r.iq,r.uz,r.he,r.nf,r.FH,r.BC,r.ai],styles:['@charset "UTF-8";.quiz-header[_ngcontent-%COMP%]{--background: linear-gradient(180deg, #0f766e, #023030)}.quiz-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#000}.top-bar[_ngcontent-%COMP%]{text-align:center;padding-left:20px;padding-right:20px}.timer[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:8px;color:#333}.progress-text[_ngcontent-%COMP%]{font-size:.9rem;margin-top:8px;color:#555}.question-container[_ngcontent-%COMP%]{padding:16px;text-align:center}.question-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:1.1rem;font-weight:700;padding:16px}ion-item[_ngcontent-%COMP%]{margin:8px 0;border:1px solid #ccc;border-radius:8px;text-align:center;padding-left:20px;padding-right:20px}ion-item.selected[_ngcontent-%COMP%]{--background: #00c9a7;--color: #fff;border:none}ion-progress-bar[_ngcontent-%COMP%]{height:14px;border-radius:10px;overflow:hidden;margin:8px 0}.button-row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px 0;gap:12px}.next-btn[_ngcontent-%COMP%]{--background: #00c9a7;--color: #fff}.prev-btn[_ngcontent-%COMP%]{--background: #eee;--color: #333}.submit-btn[_ngcontent-%COMP%]{--background: #00b092;--color: #fff}.result-popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0006;display:flex;justify-content:center;align-items:center;z-index:999}.popup-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:12px;text-align:center;width:280px}.review-container[_ngcontent-%COMP%]{padding:16px}.review-question[_ngcontent-%COMP%]{margin-bottom:20px}.option[_ngcontent-%COMP%]{padding:6px;border-radius:6px}.option.correct[_ngcontent-%COMP%]{background:#28a745;color:#fff}.option.wrong[_ngcontent-%COMP%]{background:#dc3545;color:#fff}ion-progress-bar[_ngcontent-%COMP%]::part(track){background:#f1f1f1}ion-progress-bar[_ngcontent-%COMP%]::part(progress){background:#00c9a7}.result-card[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:16px;text-align:center;width:300px;box-shadow:0 4px 12px #00000026}.stars[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:12px}.star[_ngcontent-%COMP%]{font-size:2.5rem}.star.red[_ngcontent-%COMP%]{color:#e74c3c}.star.yellow[_ngcontent-%COMP%]{color:#f1c40f}.star.green[_ngcontent-%COMP%]{color:#2ecc71}.effort-text[_ngcontent-%COMP%]{font-family:Georgia,serif;font-size:1.3rem;margin:10px 0 20px;color:#5a2d82;font-weight:700}.score-table[_ngcontent-%COMP%]{text-align:left;margin:10px 0 20px;background:#f9f9f9;border-radius:12px;padding:12px 16px}.row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:6px 0;font-size:.95rem}.row.total[_ngcontent-%COMP%]{font-weight:700;border-top:1px solid #ddd;padding-top:8px}.got-it-btn[_ngcontent-%COMP%]{--background: #00c9a7;--color: #fff;font-weight:700;border-radius:8px}']})}return e})()}}]);